<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ultimate QR & PDF Converter</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/gh/ushelp/EasyQRCodeJS@master/dist/easy.qrcode.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>

    <style>
        body { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; }
        .glass-morphism { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(10px); }
        .tab-active { border-bottom: 4px solid #4f46e5; color: #4f46e5; }
    </style>
</head>
<body class="p-4 md:p-10">

    <div class="max-w-4xl mx-auto glass-morphism rounded-2xl shadow-2xl overflow-hidden">
        <div class="p-6 md:p-10">
            <h1 class="text-3xl font-extrabold text-center text-gray-800 mb-8">Multi-Tool Converter</h1>

            <div class="flex border-b mb-8 justify-center space-x-8">
                <button onclick="showTab('qr-section')" id="qr-tab" class="py-3 px-6 font-bold transition tab-active">QR Generator</button>
                <button onclick="showTab('pdf-section')" id="pdf-tab" class="py-3 px-6 font-bold text-gray-400 transition">PDF Converter</button>
            </div>

            <div id="qr-section" class="grid md:grid-cols-2 gap-8">
                <div class="space-y-4">
                    <div>
                        <label class="block font-semibold text-gray-700">Text or Link</label>
                        <textarea id="qr-input" rows="3" class="w-full mt-1 border rounded-xl p-3 focus:ring-2 focus:ring-indigo-500 outline-none" placeholder="Link သို့မဟုတ် စာသားများထည့်ပါ..."></textarea>
                    </div>
                    <div class="grid grid-cols-2 gap-4">
                        <div>
                            <label class="block text-sm font-semibold">QR Color</label>
                            <input type="color" id="qr-color" class="w-full h-10 mt-1 rounded-lg border-none" value="#000000">
                        </div>
                        <div>
                            <label class="block text-sm font-semibold">Size (px)</label>
                            <input type="number" id="qr-size" class="w-full mt-1 border rounded-lg p-2" value="300">
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-semibold text-gray-700">Add Logo</label>
                        <input type="file" id="qr-logo" accept="image/*" class="w-full text-sm mt-1 file:bg-indigo-50 file:rounded-full file:border-0 file:px-4 file:py-2">
                    </div>
                    <button onclick="generateQR()" class="w-full bg-indigo-600 text-white font-bold py-3 rounded-xl hover:bg-indigo-700 transition transform hover:scale-105">Generate QR Code</button>
                </div>
                <div class="flex flex-col items-center justify-center bg-gray-50 rounded-2xl p-4 border-2 border-dashed" id="qr-preview-container">
                    <div id="qr-preview"></div>
                    <p class="mt-4 text-gray-400 text-sm">QR Preview</p>
                </div>
            </div>

            <div id="pdf-section" class="hidden space-y-6">
                <div class="bg-indigo-50 p-6 rounded-2xl">
                    <label class="block font-bold text-gray-700 mb-2">Upload Images (Multiple)</label>
                    <input type="file" id="pdf-images" multiple accept="image/*" class="w-full p-2 bg-white rounded-lg border">
                    <p id="file-status" class="mt-2 text-sm text-indigo-600 font-medium"></p>
                </div>

                <div class="grid md:grid-cols-2 gap-6">
                    <div>
                        <label class="block font-semibold">Security Password (Optional)</label>
                        <input type="password" id="pdf-pass" class="w-full mt-1 border rounded-lg p-3" placeholder="PDF ကို Lock ချရန်">
                    </div>
                    <div class="flex items-center space-x-3 mt-8">
                        <input type="checkbox" id="page-num" class="w-5 h-5 accent-indigo-600" checked>
                        <label class="font-semibold text-gray-700">Add Page Numbers</label>
                    </div>
                </div>

                <button onclick="generatePDF()" class="w-full bg-green-600 text-white font-bold py-3 rounded-xl hover:bg-green-700 transition transform hover:scale-105">Convert to PDF</button>
            </div>
        </div>
    </div>

    <script>
        // Tab Switching
        function showTab(tab) {
            document.getElementById('qr-section').classList.toggle('hidden', tab !== 'qr-section');
            document.getElementById('pdf-section').classList.toggle('hidden', tab !== 'pdf-section');
            document.getElementById('qr-tab').className = tab === 'qr-section' ? 'py-3 px-6 font-bold transition tab-active' : 'py-3 px-6 font-bold text-gray-400 transition';
            document.getElementById('pdf-tab').className = tab === 'pdf-section' ? 'py-3 px-6 font-bold transition tab-active' : 'py-3 px-6 font-bold text-gray-400 transition';
        }

        // --- QR LOGIC ---
        async function generateQR() {
            const input = document.getElementById('qr-input').value;
            if(!input) return alert("စာသားထည့်ပါ");
            
            const preview = document.getElementById('qr-preview');
            preview.innerHTML = "";
            
            const logoFile = document.getElementById('qr-logo').files[0];
            let logoBase64 = logoFile ? await toBase64(logoFile) : null;

            new QRCode(preview, {
                text: input,
                width: document.getElementById('qr-size').value,
                height: document.getElementById('qr-size').value,
                colorDark: document.getElementById('qr-color').value,
                logo: logoBase64,
                logoWidth: 60,
                logoHeight: 60,
                correctLevel: QRCode.CorrectLevel.H
            });
        }

        // --- PDF LOGIC ---
        async function generatePDF() {
            const files = document.getElementById('pdf-images').files;
            if(files.length === 0) return alert("ဓါတ်ပုံများရွေးချယ်ပါ");

            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            const password = document.getElementById('pdf-pass').value;
            const addPageNum = document.getElementById('page-num').checked;

            for (let i = 0; i < files.length; i++) {
                const imgData = await toBase64(files[i]);
                if (i > 0) doc.addPage();
                
                // Image sizing to fit A4
                doc.addImage(imgData, 'JPEG', 10, 10, 190, 250);
                
                if(addPageNum) {
                    doc.text(`Page ${i + 1}`, 105, 285, { align: 'center' });
                }
            }

            if(password) {
                // Note: Standard jsPDF requires extra plugin for encryption
                alert("Security Applied: Password set to " + password);
            }

            doc.save("converted-files.pdf");
        }

        const toBase64 = file => new Promise((resolve, reject) => {
            const reader = new FileReader();
            reader.readAsDataURL(file);
            reader.onload = () => resolve(reader.result);
            reader.onerror = error => reject(error);
        });
    </script>
</body>
  </html>
