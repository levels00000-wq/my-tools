<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF & QR Generator - Professional Tool</title>
    <script src="https://unpkg.com/pdf-lib@1.17.1/dist/pdf-lib.min.js"></script>
    <script src="https://unpkg.com/qrcode@1.5.3/build/qrcode.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        :root { --bg: #0f0f23; --glass: rgba(255,255,255,0.1); }
        .glass { background: var(--glass); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.2); }
        .gradient-text { background: linear-gradient(45deg, #8b5cf6, #ec4899, #06b6d4); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text; }
        .tab-active { background-color: rgba(139, 92, 246, 0.5) !important; color: #a78bfa !important; border: 1px solid #8b5cf6; }
        .preview-box { border: 2px dashed rgba(255,255,255,0.2); border-radius: 20px; overflow: hidden; background: rgba(0,0,0,0.3); }
    </style>
</head>
<body class="bg-gradient-to-br from-slate-900 via-purple-900/20 to-slate-900 min-h-screen text-white font-sans pb-20">
    
    <nav class="glass fixed top-0 w-full z-50 p-4">
        <div class="container mx-auto flex justify-between items-center">
            <h1 class="text-2xl font-black gradient-text">PDF-QR Pro</h1>
            <div class="flex gap-4">
                <button onclick="showSection('home')" class="hover:text-purple-400">Home</button>
                <button onclick="showSection('pdf')" class="hover:text-purple-400">PDF</button>
                <button onclick="showSection('qr')" class="hover:text-purple-400">QR</button>
            </div>
        </div>
    </nav>

    <section id="home" class="min-h-screen flex items-center justify-center pt-20 px-4">
        <div class="text-center">
            <h1 class="text-5xl md:text-7xl font-black mb-6 gradient-text">Smart Generator</h1>
            <p class="text-slate-300 text-lg mb-8">Preview ·Ä°·Äõ·ÄÑ·Ä∫·ÄÄ·Äº·Ää·Ä∑·Ä∫·Åä ·ÄÖ·Ä≠·Äê·Ä∫·ÄÄ·Äº·Ä≠·ÄØ·ÄÄ·Ä∫·Äô·Äæ ·Äí·Ä±·Ä´·ÄÑ·Ä∫·Ä∏·Äú·ÄØ·Äï·Ä∫·ÄÜ·ÄΩ·Ä≤·Äï·Ä´·Åã</p>
            <div class="flex gap-4 justify-center">
                <button onclick="showSection('pdf')" class="px-8 py-4 bg-purple-600 rounded-xl font-bold">PDF ·ÄÖ·Äê·ÄÑ·Ä∫·Äõ·Äî·Ä∫</button>
                <button onclick="showSection('qr')" class="px-8 py-4 bg-emerald-600 rounded-xl font-bold">QR ·ÄÖ·Äê·ÄÑ·Ä∫·Äõ·Äî·Ä∫</button>
            </div>
        </div>
    </section>

    <section id="pdf" class="min-h-screen pt-24 px-4 hidden">
        <div class="container mx-auto max-w-4xl">
            <div class="glass p-8 rounded-3xl">
                <h2 class="text-3xl font-bold mb-6 gradient-text">PDF Maker</h2>
                <div class="flex bg-white/5 rounded-xl p-1 mb-6">
                    <button onclick="setPDFType('text', event)" class="flex-1 py-3 rounded-lg tab-active">Text</button>
                    <button onclick="setPDFType('photo', event)" class="flex-1 py-3 rounded-lg">Photo</button>
                </div>

                <div id="pdfInputArea" class="mb-6">
                    <textarea id="pdfText" rows="5" class="w-full p-4 rounded-xl bg-white/5 border border-white/20" placeholder="·ÄÖ·Ä¨·Äû·Ä¨·Ä∏·Äë·Ää·Ä∑·Ä∫·Äï·Ä´..."></textarea>
                    <input type="file" id="pdfFile" accept="image/*" class="w-full p-4 bg-white/5 rounded-xl hidden">
                </div>

                <button onclick="previewPDF()" class="w-full py-4 bg-purple-600 rounded-xl font-bold mb-6">üëÅÔ∏è Preview PDF</button>

                <div id="pdfPreviewContainer" class="hidden">
                    <div class="preview-box p-4 mb-4">
                        <iframe id="pdfPreviewFrame" class="w-full h-96 rounded-lg"></iframe>
                    </div>
                    <button onclick="downloadPDF()" class="w-full py-4 bg-pink-600 rounded-xl font-bold">üíæ Download PDF Now</button>
                </div>
            </div>
        </div>
    </section>

    <section id="qr" class="min-h-screen pt-24 px-4 hidden">
        <div class="container mx-auto max-w-4xl">
            <div class="glass p-8 rounded-3xl">
                <h2 class="text-3xl font-bold mb-6 gradient-text">QR Generator</h2>
                <input type="text" id="qrText" class="w-full p-4 rounded-xl bg-white/5 border border-white/20 mb-6" placeholder="·ÄÖ·Ä¨·Äû·Ä¨·Ä∏ ·Äû·Ä≠·ÄØ·Ä∑·Äô·Äü·ÄØ·Äê·Ä∫ Link ·Äë·Ää·Ä∑·Ä∫·Äï·Ä´...">
                
                <div class="grid grid-cols-2 gap-4 mb-6">
                    <div class="bg-white/5 p-4 rounded-xl">
                        <label class="block mb-2 text-sm">QR Color</label>
                        <input type="color" id="qrColor" value="#000000" class="w-full">
                    </div>
                    <div class="bg-white/5 p-4 rounded-xl">
                        <label class="block mb-2 text-sm">BG Color</label>
                        <input type="color" id="qrBG" value="#ffffff" class="w-full">
                    </div>
                </div>

                <button onclick="previewQR()" class="w-full py-4 bg-emerald-600 rounded-xl font-bold mb-6">üëÅÔ∏è Preview QR Code</button>

                <div id="qrPreviewContainer" class="hidden text-center">
                    <div class="preview-box p-8 mb-4 flex justify-center">
                        <canvas id="qrCanvas" class="rounded-lg shadow-2xl"></canvas>
                    </div>
                    <button onclick="downloadQR()" class="w-full py-4 bg-blue-600 rounded-xl font-bold">üíæ Download PNG Now</button>
                </div>
            </div>
        </div>
    </section>

    <script>
        let currentPDFType = 'text';
        let lastPDFBlob = null;

        function showSection(id) {
            document.querySelectorAll('section').forEach(s => s.classList.add('hidden'));
            document.getElementById(id).classList.remove('hidden');
            window.scrollTo(0,0);
        }

        function setPDFType(type, e) {
            currentPDFType = type;
            document.getElementById('pdfText').classList.toggle('hidden', type !== 'text');
            document.getElementById('pdfFile').classList.toggle('hidden', type !== 'photo');
            e.target.parentElement.querySelectorAll('button').forEach(b => b.classList.remove('tab-active'));
            e.target.classList.add('tab-active');
        }

        // --- PDF Preview Logic ---
        async function previewPDF() {
            try {
                const { PDFDocument, rgb } = PDFLib;
                const pdfDoc = await PDFDocument.create();
                
                // Fetch Myanmar Font
                const fontUrl = 'https://cdn.jsdelivr.net/gh/googlefonts/pyidaungsu@master/fonts/ttf/Pyidaungsu-Regular.ttf';
                const fontBytes = await fetch(fontUrl).then(res => res.arrayBuffer());
                const myFont = await pdfDoc.embedFont(fontBytes);

                const page = pdfDoc.addPage([595, 842]);
                const { height } = page.getSize();

                if (currentPDFType === 'text') {
                    const text = document.getElementById('pdfText').value || "No Content";
                    page.drawText(text, { x: 50, y: height - 100, size: 18, font: myFont });
                } else {
                    const file = document.getElementById('pdfFile').files[0];
                    if (!file) return alert("·Äì·Ä¨·Äê·Ä∫·Äï·ÄØ·Ä∂·Äõ·ÄΩ·Ä±·Ä∏·Äï·Ä´");
                    const imgBytes = await file.arrayBuffer();
                    const img = file.type.includes('png') ? await pdfDoc.embedPng(imgBytes) : await pdfDoc.embedJpg(imgBytes);
                    page.drawImage(img, { x: 50, y: height - 450, width: 400, height: 400 });
                }

                const pdfBytes = await pdfDoc.save();
                lastPDFBlob = new Blob([pdfBytes], { type: 'application/pdf' });
                const url = URL.createObjectURL(lastPDFBlob);
                
                document.getElementById('pdfPreviewFrame').src = url;
                document.getElementById('pdfPreviewContainer').classList.remove('hidden');
            } catch (err) { alert(err.message); }
        }

        function downloadPDF() {
            if (!lastPDFBlob) return;
            const link = document.createElement('a');
            link.href = URL.createObjectURL(lastPDFBlob);
            link.download = `Document_${Date.now()}.pdf`;
            link.click();
        }

        // --- QR Preview Logic ---
        async function previewQR() {
            const data = document.getElementById('qrText').value;
            if (!data) return alert("·ÄÖ·Ä¨·Äû·Ä¨·Ä∏·Äë·Ää·Ä∑·Ä∫·Äï·Ä´");

            const canvas = document.getElementById('qrCanvas');
            await QRCode.toCanvas(canvas, data, {
                width: 300,
                color: {
                    dark: document.getElementById('qrColor').value,
                    light: document.getElementById('qrBG').value
                }
            });

            document.getElementById('qrPreviewContainer').classList.remove('hidden');
        }

        function downloadQR() {
            const canvas = document.getElementById('qrCanvas');
            const link = document.createElement('a');
            link.download = 'qrcode.png';
            link.href = canvas.toDataURL();
            link.click();
        }
    </script>
</body>
</html>